type = "map_units",
returnclass = "sf") %>%
filter(name %in% c("Argentina",
"Bolivia",
"Brazil",
"Chile",
"Colombia",
"Ecuador",
"Guyana",
"Paraguay",
"Peru",
"Suriname",
"Uruguay",
"Venezuela"))
SDI <- SDI %>%
filter(Location %in% c("Argentina",
"Bolivia",
"Brazil",
"Chile",
"Colombia",
"Ecuador",
"Guyana",
"Paraguay",
"Peru",
"Suriname",
"Uruguay",
"Venezuela")) %>%
select("Location", "1990", "2019") %>%
pivot_longer(cols = c("1990", "2019"),
names_to = "year",
values_to = "SDI")
GBDrates <- GBDrates %>%
mutate(measure = recode(measure,
"YLDs (Years Lived with Disability)" = "YLDs",
"YLLs (Years of Life Lost)" = "YLLs",
"DALYs (Disability-Adjusted Life Years)" = "DALYs")) %>%
mutate(location = recode(location,
"Bolivia (Plurinational State of)" = "Bolivia",
"Venezuela (Bolivarian Republic of)" = "Venezuela")) %>%
mutate(year_end = as.factor(year_end)) %>%
select(-c("rei", "year_start")) %>%
rename(ROC_val = val, ROC_upper = upper, ROC_lower = lower)
GBD <- GBD %>%
mutate(measure = recode(measure,
"YLDs (Years Lived with Disability)" = "YLDs",
"YLLs (Years of Life Lost)" = "YLLs",
"DALYs (Disability-Adjusted Life Years)" = "DALYs")) %>%
mutate(location = recode(location,
"Bolivia (Plurinational State of)" = "Bolivia",
"Venezuela (Bolivarian Republic of)" = "Venezuela"))%>%
mutate(val_cat = cut(x = GBD$val,
breaks = c(-Inf, 1, 10, 100, 500,
1000, 2500, 5000, Inf),
labels = c("0 - 1",
"1 - 10",
"10 - 100",
"100 - 500",
"500 - 1000",
"1000 - 2500",
"2500 - 5000",
">5000"))) %>%
mutate(year = as.factor(year)) %>%
full_join(SDI, by = c("location" = "Location", "year" = "year")) %>%
full_join(GBDrates, by = c("location" = "location",
"measure" = "measure",
"sex" = "sex",
"cause" = "cause",
"metric" = "metric",
"year" = "year_end",
"age" = "age")) %>%
full_join(SA %>% select(c("admin", "sov_a3")),
by = c("location" = "admin"))
#%>%
# full_join(GBD_POP_1990,
#           by = c("location" = "location_name",
#                  "sex" = "sex_name",
#                  "year" = "year_id",
#                  "age" = "age_group_name")) %>%
# full_join(GBD_POP_2019,
#           by = c("location" = "location_name",
#                  "sex" = "sex_name",
#                  "year" = "year_id",
#                  "age" = "age_group_name"))
GBD_SA <- GBD %>%
filter(age == "All ages") %>%
group_by(measure, cause, metric, year) %>%
summarise(location = "South America",
val = sum(val)) %>%
filter(metric == "Number") %>%
mutate(age = "All ages")
rm("GBDrates", "SDI") #don't wanna waste my precious RAM...
GBD_SA <- GBD_SA %>%
inner_join(GBD_POP_all %>% select(year, pop), by = "year")
GBD_SA <- GBD_SA %>%
mutate(val_rate = val/pop)
library(ggplot2)
library(ggthemes)
library(plotly)
library(tidyverse)
library(readr)
library(here)
# library(maps)
# library(ggmap)
# library(maptools)
library(rnaturalearth)
library(rnaturalearthdata)
library(rnaturalearthhires)
library(hrbrthemes)
library(shadowtext)
GBD <- readr::read_csv(file = here::here("GBD_vals.csv"))
GBDrates <- readr::read_csv(file = here::here("GBD_ROC.csv"))
SDI <- readr::read_csv(file = here::here("GBD_SDI_1990_2019.csv"))
dalys_all_causes_num_1990 <- read_csv(file = here::here("GBD_AGE_5_5_group.csv"),
col_types = cols(age = col_factor(levels = c("<5 years",
"5-9 years",
"10-14 years",
"15-19 years",
"20-24 years",
"25-29 years",
"30-34 years",
"35-39 years",
"40-44 years",
"45-49 years",
"50-54 years",
"55-59 years",
"60-64 years",
"65-69 years",
"70-74 years",
"75-79 years",
"80-84",
"85-89",
"90-94",
"95+ years"))))
GBD_POP_2019 <- read_csv(file = here::here("GBD_POP_2019.CSV"))
GBD_POP_all <- read_csv(file = here::here("GBD_POP_1990.CSV")) %>%
bind_rows(GBD_POP_2019) %>%
mutate(sex_name = recode(sex_name,
"both" = "Both",
"male" = "Male",
"female" = "Female")) %>%
mutate(age_group_name = recode(age_group_name,
"All Ages" = "All ages")) %>%
mutate(location_name = recode(location_name,
"Bolivia (Plurinational State of)" = "Bolivia",
"Venezuela (Bolivarian Republic of)" = "Venezuela"))%>%
select(c("location_name",
"sex_name",
"age_group_name",
"val",
"year_id")) %>%
mutate(year_id = as.character(year_id))  %>%
filter(location_name %in% c("Argentina",
"Bolivia",
"Brazil",
"Chile",
"Colombia",
"Ecuador",
"Guyana",
"Paraguay",
"Peru",
"Suriname",
"Uruguay",
"Venezuela")) %>%
filter(sex_name %in% c("Both"))%>%
filter(age_group_name %in% c("All ages")) %>%
rename(pop = val, year = year_id) %>%
group_by(year, sex_name, age_group_name) %>%
summarise(location = "South America", pop = sum(pop))
SA <- ne_countries(scale = "medium",
type = "map_units",
returnclass = "sf") %>%
filter(name %in% c("Argentina",
"Bolivia",
"Brazil",
"Chile",
"Colombia",
"Ecuador",
"Guyana",
"Paraguay",
"Peru",
"Suriname",
"Uruguay",
"Venezuela"))
SDI <- SDI %>%
filter(Location %in% c("Argentina",
"Bolivia",
"Brazil",
"Chile",
"Colombia",
"Ecuador",
"Guyana",
"Paraguay",
"Peru",
"Suriname",
"Uruguay",
"Venezuela")) %>%
select("Location", "1990", "2019") %>%
pivot_longer(cols = c("1990", "2019"),
names_to = "year",
values_to = "SDI")
GBDrates <- GBDrates %>%
mutate(measure = recode(measure,
"YLDs (Years Lived with Disability)" = "YLDs",
"YLLs (Years of Life Lost)" = "YLLs",
"DALYs (Disability-Adjusted Life Years)" = "DALYs")) %>%
mutate(location = recode(location,
"Bolivia (Plurinational State of)" = "Bolivia",
"Venezuela (Bolivarian Republic of)" = "Venezuela")) %>%
mutate(year_end = as.factor(year_end)) %>%
select(-c("rei", "year_start")) %>%
rename(ROC_val = val, ROC_upper = upper, ROC_lower = lower)
GBD <- GBD %>%
mutate(measure = recode(measure,
"YLDs (Years Lived with Disability)" = "YLDs",
"YLLs (Years of Life Lost)" = "YLLs",
"DALYs (Disability-Adjusted Life Years)" = "DALYs")) %>%
mutate(location = recode(location,
"Bolivia (Plurinational State of)" = "Bolivia",
"Venezuela (Bolivarian Republic of)" = "Venezuela"))%>%
mutate(val_cat = cut(x = GBD$val,
breaks = c(-Inf, 1, 10, 100, 500,
1000, 2500, 5000, Inf),
labels = c("0 - 1",
"1 - 10",
"10 - 100",
"100 - 500",
"500 - 1000",
"1000 - 2500",
"2500 - 5000",
">5000"))) %>%
mutate(year = as.factor(year)) %>%
full_join(SDI, by = c("location" = "Location", "year" = "year")) %>%
full_join(GBDrates, by = c("location" = "location",
"measure" = "measure",
"sex" = "sex",
"cause" = "cause",
"metric" = "metric",
"year" = "year_end",
"age" = "age")) %>%
full_join(SA %>% select(c("admin", "sov_a3")),
by = c("location" = "admin"))
#%>%
# full_join(GBD_POP_1990,
#           by = c("location" = "location_name",
#                  "sex" = "sex_name",
#                  "year" = "year_id",
#                  "age" = "age_group_name")) %>%
# full_join(GBD_POP_2019,
#           by = c("location" = "location_name",
#                  "sex" = "sex_name",
#                  "year" = "year_id",
#                  "age" = "age_group_name"))
GBD_SA <- GBD %>%
filter(age == "All ages") %>%
group_by(measure, cause, metric, year) %>%
summarise(location = "South America",
val = sum(val)) %>%
filter(metric == "Number") %>%
mutate(age = "All ages")
rm("GBDrates", "SDI") #don't wanna waste my precious RAM...
GBD_SA <- GBD_SA %>%
inner_join(GBD_POP_all %>% select(year, pop), by = "year")
GBD_SA <- GBD_SA %>%
mutate(val_rate = (val/pop)*100000)
library(ggplot2)
library(ggthemes)
library(plotly)
library(tidyverse)
library(readr)
library(here)
# library(maps)
# library(ggmap)
# library(maptools)
library(rnaturalearth)
library(rnaturalearthdata)
library(rnaturalearthhires)
library(hrbrthemes)
library(shadowtext)
GBD <- readr::read_csv(file = here::here("GBD_vals.csv"))
GBDrates <- readr::read_csv(file = here::here("GBD_ROC.csv"))
SDI <- readr::read_csv(file = here::here("GBD_SDI_1990_2019.csv"))
dalys_all_causes_num_1990 <- read_csv(file = here::here("GBD_AGE_5_5_group.csv"),
col_types = cols(age = col_factor(levels = c("<5 years",
"5-9 years",
"10-14 years",
"15-19 years",
"20-24 years",
"25-29 years",
"30-34 years",
"35-39 years",
"40-44 years",
"45-49 years",
"50-54 years",
"55-59 years",
"60-64 years",
"65-69 years",
"70-74 years",
"75-79 years",
"80-84",
"85-89",
"90-94",
"95+ years"))))
GBD_POP_2019 <- read_csv(file = here::here("GBD_POP_2019.CSV"))
GBD_POP_all <- read_csv(file = here::here("GBD_POP_1990.CSV")) %>%
bind_rows(GBD_POP_2019) %>%
mutate(sex_name = recode(sex_name,
"both" = "Both",
"male" = "Male",
"female" = "Female")) %>%
mutate(age_group_name = recode(age_group_name,
"All Ages" = "All ages")) %>%
mutate(location_name = recode(location_name,
"Bolivia (Plurinational State of)" = "Bolivia",
"Venezuela (Bolivarian Republic of)" = "Venezuela"))%>%
select(c("location_name",
"sex_name",
"age_group_name",
"val",
"year_id")) %>%
mutate(year_id = as.character(year_id))  %>%
filter(location_name %in% c("Argentina",
"Bolivia",
"Brazil",
"Chile",
"Colombia",
"Ecuador",
"Guyana",
"Paraguay",
"Peru",
"Suriname",
"Uruguay",
"Venezuela")) %>%
filter(sex_name %in% c("Both"))%>%
filter(age_group_name %in% c("All ages")) %>%
rename(pop = val, year = year_id) %>%
group_by(year, sex_name, age_group_name) %>%
summarise(location = "South America", pop = sum(pop))
SA <- ne_countries(scale = "medium",
type = "map_units",
returnclass = "sf") %>%
filter(name %in% c("Argentina",
"Bolivia",
"Brazil",
"Chile",
"Colombia",
"Ecuador",
"Guyana",
"Paraguay",
"Peru",
"Suriname",
"Uruguay",
"Venezuela"))
SDI <- SDI %>%
filter(Location %in% c("Argentina",
"Bolivia",
"Brazil",
"Chile",
"Colombia",
"Ecuador",
"Guyana",
"Paraguay",
"Peru",
"Suriname",
"Uruguay",
"Venezuela")) %>%
select("Location", "1990", "2019") %>%
pivot_longer(cols = c("1990", "2019"),
names_to = "year",
values_to = "SDI")
GBDrates <- GBDrates %>%
mutate(measure = recode(measure,
"YLDs (Years Lived with Disability)" = "YLDs",
"YLLs (Years of Life Lost)" = "YLLs",
"DALYs (Disability-Adjusted Life Years)" = "DALYs")) %>%
mutate(location = recode(location,
"Bolivia (Plurinational State of)" = "Bolivia",
"Venezuela (Bolivarian Republic of)" = "Venezuela")) %>%
mutate(year_end = as.factor(year_end)) %>%
select(-c("rei", "year_start")) %>%
rename(ROC_val = val, ROC_upper = upper, ROC_lower = lower)
GBD <- GBD %>%
mutate(measure = recode(measure,
"YLDs (Years Lived with Disability)" = "YLDs",
"YLLs (Years of Life Lost)" = "YLLs",
"DALYs (Disability-Adjusted Life Years)" = "DALYs")) %>%
mutate(location = recode(location,
"Bolivia (Plurinational State of)" = "Bolivia",
"Venezuela (Bolivarian Republic of)" = "Venezuela"))%>%
mutate(val_cat = cut(x = GBD$val,
breaks = c(-Inf, 1, 10, 100, 500,
1000, 2500, 5000, Inf),
labels = c("0 - 1",
"1 - 10",
"10 - 100",
"100 - 500",
"500 - 1000",
"1000 - 2500",
"2500 - 5000",
">5000"))) %>%
mutate(year = as.factor(year)) %>%
full_join(SDI, by = c("location" = "Location", "year" = "year")) %>%
full_join(GBDrates, by = c("location" = "location",
"measure" = "measure",
"sex" = "sex",
"cause" = "cause",
"metric" = "metric",
"year" = "year_end",
"age" = "age")) %>%
full_join(SA %>% select(c("admin", "sov_a3")),
by = c("location" = "admin"))
#%>%
# full_join(GBD_POP_1990,
#           by = c("location" = "location_name",
#                  "sex" = "sex_name",
#                  "year" = "year_id",
#                  "age" = "age_group_name")) %>%
# full_join(GBD_POP_2019,
#           by = c("location" = "location_name",
#                  "sex" = "sex_name",
#                  "year" = "year_id",
#                  "age" = "age_group_name"))
GBD_SA <- GBD %>%
filter(age == "All ages") %>%
group_by(measure, cause, metric, year) %>%
summarise(location = "South America",
val = sum(val)) %>%
filter(metric == "Number") %>%
mutate(age = "All ages")%>%
inner_join(GBD_POP_all %>% select(year, pop), by = "year") %>%
mutate(val_rate = (val/pop)*100000)
rm("GBDrates", "SDI") #don't wanna waste my precious RAM...
library(esquisse)
esquisser()
esquisser()
GBD_SA %>%
filter(cause %in% "All causes") %>%
ggplot() +
aes(x = measure, y = val_rate, fill = measure) +
geom_col() +
scale_fill_hue(direction = 1) +
labs(y = "rate (per 100.000)", title = "DALYs, YLDs, YLLs and Deaths rate (per 100.000) in South America in 1990 and 2019 (all ages)") +
coord_flip() +
ggthemes::theme_base() +
theme(legend.position = "top") +
facet_wrap(vars(year)) +
ylim(0, 2500)
GBD_SA %>%
filter(cause %in% "All causes") %>%
ggplot() +
aes(x = measure, y = val, fill = measure) +
geom_col() +
scale_fill_hue(direction = 1) +
labs(y = "number", title = "DALYs, YLDs, YLLs and Deaths (number) in South America in 1990 and 2019 (all ages)",
fill = " ") +
coord_flip() +
ggthemes::theme_base() +
theme(legend.position = "top") +
facet_wrap(vars(year),
scales = "free_y")
GBD_SA %>%
filter(cause %in% "All causes") %>%
ggplot() +
aes(x = measure, y = val, fill = measure) +
geom_col() +
scale_fill_hue(direction = 1) +
labs(y = "number", title = "DALYs, YLDs, YLLs and Deaths (number) in South America in 1990 and 2019 (all ages)",
fill = " ") +
coord_flip() +
ggthemes::theme_base() +
theme(legend.position = "top") +
facet_wrap(vars(year),
scales = "free_y")
GBD_SA %>%
filter(cause %in% "All causes") %>%
ggplot() +
aes(x = measure, y = val_rate, fill = measure) +
geom_col() +
scale_fill_hue(direction = 1) +
labs(y = "rate (per 100.000)", title = "DALYs, YLDs, YLLs and Deaths rate (per 100.000) in South America in 1990 and 2019 (all ages)",
fill = " ") +
coord_flip() +
ggthemes::theme_base() +
theme(legend.position = "top") +
facet_wrap(vars(year)) +
ylim(0, 2500)
View(dalys_all_causes_num_1990)
GBD_SA %>%
filter(cause %in% "All causes") %>%
ggplot() +
aes(x = measure, y = val, fill = measure) +
geom_col() +
scale_fill_hue(direction = 1) +
labs(y = "number", title = "DALYs, YLDs, YLLs and Deaths (number) in South America in 1990 and 2019 (all ages, all causes)",
fill = " ") +
coord_flip() +
ggthemes::theme_base() +
theme(legend.position = "top") +
facet_wrap(vars(year),
scales = "free_y")
GBD_SA %>%
filter(cause %in% "All causes") %>%
ggplot() +
aes(x = measure, y = val_rate, fill = measure) +
geom_col() +
scale_fill_hue(direction = 1) +
labs(y = "rate (per 100.000)", title = "DALYs, YLDs, YLLs and Deaths rate (per 100.000) in South America in 1990 and 2019 (all ages, all causes)",
fill = " ") +
coord_flip() +
ggthemes::theme_base() +
theme(legend.position = "top") +
facet_wrap(vars(year)) +
ylim(0, 2500)
