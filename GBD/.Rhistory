facet_wrap(vars(sex))+
labs(x = "", y = "DALYs", fill = "") +
ggthemes::theme_base() +
theme(
axis.text.x = element_text(hjust = 1,
angle = 45,
size = 8))+
coord_cartesian(ylim = c(0,7000))
pp2.1
#ggsave("DALYs1990", device = svg)
pp2.2 <-  ggplot(p2) +
aes(x = year, fill = measure, weight = val) +
geom_bar(width = 1) +
labs(x = "", y = "DALYs per 100.000", fill = "",
title = "Rate of DALYs by location, sex and year") +
ggthemes::theme_base() +
facet_grid(vars(sex), vars(location))+
theme(
axis.text.x = element_text(hjust = 1,
angle = 45,
size = 8),
axis.text.y = element_text(hjust = 0,5,
angle = 0,
size = 8),
strip.text.x = element_text(
angle = 45,
size = 8),
strip.text.y = element_text(hjust = 0.8, size = 8),
panel.background = element_blank(),
panel.border = element_blank())+
coord_cartesian(ylim = c(0,7000))
pp2.2
p2 <- GBD %>%
filter (cause == "All causes", metric == "Rate",
measure != "DALYs", measure != "Deaths")
pp2 <-  ggplot() +
geom_bar(data = p2 %>% filter(year == 2019),
mapping = aes(x = location, y = val, fill = measure, alpha = 0.8),
stat = "identity", width = 0.3) +
facet_wrap(vars(sex))+
labs(x = "", y = "DALYs", fill = "") +
ggthemes::theme_base() +
theme(
axis.text.x = element_text(hjust = 1,
angle = 45,
size = 8))+
coord_cartesian(ylim = c(0,7000))
pp2
#ggsave("DALYs2019", device = svg)
pp2.1 <-ggplot() +
geom_bar(data = p2 %>% filter(year == 1990),
mapping = aes(x = location, y = val, fill = measure),
stat = "identity", width = 0.3) +
facet_wrap(vars(sex))+
labs(x = "", y = "DALYs", fill = "") +
ggthemes::theme_base() +
theme(
axis.text.x = element_text(hjust = 1,
angle = 45,
size = 8))+
coord_cartesian(ylim = c(0,7000))
pp2.1
#ggsave("DALYs1990", device = svg)
pp2.2 <-  ggplot(p2) +
aes(x = year, fill = measure, weight = val) +
geom_bar(width = 1) +
labs(x = "", y = "DALYs per 100.000", fill = "",
title = "Rate of DALYs by location, sex and year") +
theme_minimal() +
facet_grid(vars(sex), vars(location))+
theme(
axis.text.x = element_text(hjust = 1,
angle = 45,
size = 8),
axis.text.y = element_text(hjust = 0,5,
angle = 0,
size = 8),
strip.text.x = element_text(
angle = 45,
size = 8),
strip.text.y = element_text(hjust = 0.8, size = 8),
panel.background = element_blank(),
panel.border = element_blank())+
coord_cartesian(ylim = c(0,7000))
pp2.2
library(ggplot2)
library(ggthemes)
library(plotly)
library(tidyverse)
library(readr)
library(here)
library(maps)
library(ggmap)
library(maptools)
library(hrbrthemes)
library(shadowtext)
GBD <- readr::read_csv(file = here::here("IHME-GBD_2019_DATA-4a978572-1.csv"))
head(GBD)
GBD <- GBD %>%
mutate(measure = case_when(
measure == "YLDs (Years Lived with Disability)" ~ "YLDs",
measure == "YLLs (Years of Life Lost)" ~ "YLLs",
measure =="DALYs (Disability-Adjusted Life Years)" ~ "DALYs",
measure == "Deaths" ~"Deaths")) %>%
mutate(location = case_when(
location == "Bolivia (Plurinational State of)" ~ "Bolivia",
location == "Venezuela (Bolivarian Republic of)" ~ "Venezuela",
location == "Brazil" ~ "Brazil",
location == "Uruguay" ~ "Uruguay",
location == "Argentina" ~ "Argentina",
location == "Suriname" ~ "Suriname",
location == "Colombia" ~ "Colombia",
location == "Ecuador" ~ "Ecuador",
location == "Chile" ~ "Chile",
location == "Paraguay" ~"Paraguay",
location == "Peru" ~ "Peru",
location == "Guyana" ~ "Guyana")) %>%
mutate(val_cat = cut(x = GBD$val,
breaks = c(-Inf, 1, 10, 100, 500,
1000, 2500, 5000, Inf),
labels = c("0 - 1",
"1 - 10",
"10 - 100",
"100 - 500",
"500 - 1000",
"1000 - 2500",
"2500 - 5000",
">5000"))) %>%
mutate(year = as.factor(year))
p1 <- GBD %>%
filter(year == "2019", measure == "DALYs",
sex =="Both", metric =="Rate", cause == "All causes")
ggplot(p1,
mapping = aes(x = location, y = val)) +
geom_col(width = 0.5, fill = "#b19cd9") +
geom_errorbar(aes(ymin = lower, ymax = upper),
colour = "black", width = .1)+
labs(title = "Rate of DALYS in South America countries for HFPG in 2019",
y = "DALYs(rate)", x = "Country") +
theme_bw() +
theme(axis.text.x = element_text(hjust = 1,
angle = 45,
size = 10))
p2 <- GBD %>%
filter (cause == "All causes", metric == "Rate",
measure != "DALYs", measure != "Deaths")
pp2 <-  ggplot() +
geom_bar(data = p2 %>% filter(year == 2019),
mapping = aes(x = location, y = val, fill = measure, alpha = 0.8),
stat = "identity", width = 0.3) +
facet_wrap(vars(sex))+
labs(x = "", y = "DALYs", fill = "") +
ggthemes::theme_base() +
theme(
axis.text.x = element_text(hjust = 1,
angle = 45,
size = 8))+
coord_cartesian(ylim = c(0,7000))
pp2
#ggsave("DALYs2019", device = svg)
pp2.1 <-ggplot() +
geom_bar(data = p2 %>% filter(year == 1990),
mapping = aes(x = location, y = val, fill = measure),
stat = "identity", width = 0.3) +
facet_wrap(vars(sex))+
labs(x = "", y = "DALYs", fill = "") +
ggthemes::theme_base() +
theme(
axis.text.x = element_text(hjust = 1,
angle = 45,
size = 8))+
coord_cartesian(ylim = c(0,7000))
pp2.1
#ggsave("DALYs1990", device = svg)
pp2.2 <-  ggplot(p2) +
aes(x = year, fill = measure, weight = val) +
geom_bar(width = 1) +
labs(x = "", y = "DALYs per 100.000", fill = "",
title = "Rate of DALYs by location, sex and year") +
theme_minimal() +
facet_grid(vars(sex), vars(location))+
theme(
axis.text.x = element_text(hjust = 1,
angle = 45,
size = 8),
axis.text.y = element_text(hjust = 0,5,
angle = 0,
size = 8),
strip.text.x = element_text(
angle = 45,
size = 8),
strip.text.y = element_text(hjust = 0.8, size = 8),
panel.background = element_blank(),
panel.border = element_blank())+
coord_cartesian(ylim = c(0,7000))
pp2.2
p3 <- GBD %>%
filter (metric =="Rate", year == "2019", sex == "Both",
measure == "DALYs")
ggplot(p3, mapping = aes(x = location, y = cause, fill = val_cat))+
geom_tile(color = "white", lwd = 0)+
geom_shadowtext(aes(label = round(val, digits = 0)), color = "white",
size = 2.3) +
scale_fill_viridis_d(direction = -1)+
theme_minimal() +
labs(title = "DALYs per 100.000 for each cause by country in 2019", fill = "DALYs per 100.000")+
theme(
axis.text.x = element_text(hjust = 1,
angle = 45,
size = 8),
plot.title = element_text(hjust = 0.9))
p2 <- GBD %>%
filter (cause == "All causes", metric == "Rate",
measure != "DALYs", measure != "Deaths")
pp2 <-  ggplot() +
geom_bar(data = p2 %>% filter(year == 2019),
mapping = aes(x = location, y = val, fill = measure, alpha = 0.8),
stat = "identity", width = 0.3) +
facet_wrap(vars(sex))+
labs(x = "", y = "DALYs", fill = "") +
ggthemes::theme_base() +
theme(
axis.text.x = element_text(hjust = 1,
angle = 45,
size = 8))+
coord_cartesian(ylim = c(0,7000))
pp2
#ggsave("DALYs2019", device = svg)
pp2.1 <-ggplot() +
geom_bar(data = p2 %>% filter(year == 1990),
mapping = aes(x = location, y = val, fill = measure),
stat = "identity", width = 0.3) +
facet_wrap(vars(sex))+
labs(x = "", y = "DALYs", fill = "") +
ggthemes::theme_base() +
theme(
axis.text.x = element_text(hjust = 1,
angle = 45,
size = 8))+
coord_cartesian(ylim = c(0,7000))
pp2.1
#ggsave("DALYs1990", device = svg)
pp2.2 <-  ggplot(p2) +
aes(x = year, fill = measure, weight = val) +
geom_bar(width = 1) +
labs(x = "", y = "DALYs per 100.000", fill = "",
title = "Rate of DALYs by location, sex and year") +
ggthemes::theme_base() +
facet_grid(vars(sex), vars(location))+
theme(
axis.text.x = element_text(hjust = 1,
angle = 45,
size = 8),
axis.text.y = element_text(hjust = 0,5,
angle = 0,
size = 8),
strip.text.x = element_text(
angle = 45,
size = 8),
strip.text.y = element_text(hjust = 0.8, size = 8),
panel.background = element_blank(),
panel.border = element_blank())+
coord_cartesian(ylim = c(0,7000))
pp2.2
esquisser()
library(esquisse)
esquisser()
p2 <- GBD %>%
filter (cause == "All causes", metric == "Rate",
measure != "DALYs", measure != "Deaths")
pp2 <-  ggplot() +
geom_bar(data = p2 %>% filter(year == 2019),
mapping = aes(x = location, y = val, fill = measure, alpha = 0.8),
stat = "identity", width = 0.3) +
facet_wrap(vars(sex))+
labs(x = "", y = "DALYs", fill = "") +
ggthemes::theme_base() +
theme(
axis.text.x = element_text(hjust = 1,
angle = 45,
size = 8))+
coord_cartesian(ylim = c(0,7000))
pp2
#ggsave("DALYs2019", device = svg)
pp2.1 <-ggplot() +
geom_bar(data = p2 %>% filter(year == 1990),
mapping = aes(x = location, y = val, fill = measure),
stat = "identity", width = 0.3) +
facet_wrap(vars(sex))+
labs(x = "", y = "DALYs", fill = "") +
ggthemes::theme_base() +
theme(
axis.text.x = element_text(hjust = 1,
angle = 45,
size = 8))+
coord_cartesian(ylim = c(0,7000))
pp2.1
#ggsave("DALYs1990", device = svg)
pp2.2 <-  ggplot(p2) +
aes(x = year, fill = measure, weight = val) +
geom_bar(width = 1) +
labs(x = "", y = "DALYs per 100.000", fill = "",
title = "Rate of DALYs by location, sex and year") +
ggthemes::theme_base() +
facet_grid(vars(sex), vars(location))+
theme(
axis.text.x = element_text(hjust = 1,
angle = 45,
size = 8),
axis.text.y = element_text(hjust = 0,5,
angle = 0,
size = 8),
strip.text.x = element_text(
angle = 45,
size = 8),
strip.text.y = element_text(hjust = 0.8, size = 8),
panel.background = element_blank(),
panel.border = element_blank())+
coord_cartesian(ylim = c(0,7000))
pp2.2
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot(p2.3)+
aes(x = year, y=val)+
geom_
esquisser()
View(p2.3)
p2 <- GBD %>%
filter (cause == "All causes", metric == "Rate",
measure != "DALYs", measure != "Deaths")
pp2 <-  ggplot() +
geom_bar(data = p2 %>% filter(year == 2019),
mapping = aes(x = location, y = val, fill = measure, alpha = 0.8),
stat = "identity", width = 0.3) +
facet_wrap(vars(sex))+
labs(x = "", y = "DALYs", fill = "") +
ggthemes::theme_base() +
theme(
axis.text.x = element_text(hjust = 1,
angle = 45,
size = 8))+
coord_cartesian(ylim = c(0,7000))
pp2
#ggsave("DALYs2019", device = svg)
pp2.1 <-ggplot() +
geom_bar(data = p2 %>% filter(year == 1990),
mapping = aes(x = location, y = val, fill = measure),
stat = "identity", width = 0.3) +
facet_wrap(vars(sex))+
labs(x = "", y = "DALYs", fill = "") +
ggthemes::theme_base() +
theme(
axis.text.x = element_text(hjust = 1,
angle = 45,
size = 8))+
coord_cartesian(ylim = c(0,7000))
pp2.1
#ggsave("DALYs1990", device = svg)
pp2.2 <-  ggplot(p2) +
aes(x = year, fill = measure, weight = val) +
geom_bar(width = 1) +
labs(x = "", y = "DALYs per 100.000", fill = "",
title = "Rate of DALYs by location, sex and year") +
ggthemes::theme_base() +
facet_grid(vars(sex), vars(location))+
theme(
axis.text.x = element_text(hjust = 1,
angle = 45,
size = 8),
axis.text.y = element_text(hjust = 0,5,
angle = 0,
size = 8),
strip.text.x = element_text(
angle = 45,
size = 8),
strip.text.y = element_text(hjust = 0.8, size = 8),
panel.background = element_blank(),
panel.border = element_blank())+
coord_cartesian(ylim = c(0,7000))
pp2.2
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_line(aes(x = year, y=val))
pp2.3
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_line(aes(x = year, y=val))
pp2.3
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_line(aes(x = year, y=val))
pp2.3
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_line(x = year, y=val)
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_line(data = p2.3, aes(x = year, y=val))
pp2.3
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_pointrange(data = p2.3, aes(x = year, y=val))
pp2.3
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_point(data = p2.3, aes(x = year, y=val))
pp2.3
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_smooth(data = p2.3, aes(x = year, y=val))
pp2.3
esquisser()
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_line(data = p2.3, aes(x = year, y=val))
pp2.3
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_path(data = p2.3, aes(x = year, y=val))
pp2.3
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_line(data = p2.3 %>% filter(measure == "DALYs"),
aes(x = year, y=val))
pp2.3
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_path(data = p2.3 %>% filter(measure == "DALYs"),
aes(x = year, y=val))
pp2.3
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_path(data = p2.3 %>% filter(measure == "DALYs"),
aes(x = year, y=val))+
facet_grid(vars(sex), vars(location))
pp2.3
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_line(data = p2.3 %>% filter(measure == "DALYs"),
aes(x = year, y=val))+
facet_grid(vars(sex), vars(location))
pp2.3
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_point(data = p2.3 %>% filter(measure == "DALYs"),
aes(x = year, y=val))+
facet_grid(vars(sex), vars(location))
pp2.3
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_point(data = p2.3 %>% filter(measure == "DALYs"),
aes(x = year, y=val))+
geom_line(data = p2.3 %>% filter(measure == "DALYs"),
aes(x = year, y=val))+
facet_grid(vars(sex), vars(location))
pp2.3
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot(aes(x = year, y=val))+
geom_point(data = p2.3 %>% filter(measure == "DALYs"))+
facet_grid(vars(sex), vars(location))
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_point(data = p2.3 %>% filter(measure == "DALYs"),
aes(x = year, y=val))+
facet_grid(vars(sex), vars(location))
pp2.3
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_linerange(data = p2.3 %>% filter(measure == "DALYs"),
aes(x = year, y=val))+
facet_grid(vars(sex), vars(location))
pp2.3
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot()+
geom_line(data = p2.3 %>% filter(measure == "DALYs"),
aes(x = year, y=val))+
facet_grid(vars(sex), vars(location))
pp2.3
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot(x = year, y = val)+
geom_line()
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot(p2.3, aes(x = year, y = val))+
geom_line()
pp2.3
p2.3 <- GBD %>%
filter (cause == "All causes", metric == "Rate")
pp2.3 <-  ggplot(p2.3, aes(x = year, y = val))+
geom_point()
pp2.3
