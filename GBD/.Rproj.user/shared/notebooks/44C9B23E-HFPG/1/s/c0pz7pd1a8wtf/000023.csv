"0",""
"0","GBD <- GBD %>% "
"0","       bind_rows(GBD_2)"
"0","rm(GBD_2) #Dont waste my precious RAM"
"0",""
"0","GBD <- GBD %>% "
"0","       mutate(age = recode(age, ""80-84"" = ""80-84 years"","
"0","                                ""85-89"" = ""85-89 years"","
"0","                                ""90-94"" = ""90-94 years""),"
"0","              year = as.factor(year))%>%"
"0","       mutate(age = as.factor(age#, levels = c(""<5 years"",                                                                        ""5-9 years"","
"0","                                 #             ""10-14 years"","
"0","                                  #            ""15-19 years"","
"0","                                   #           ""20-24 years"","
"0","                                    #          ""25-29 years"","
"0","                                     #         ""30-34 years"","
"0","                                      #        ""35-39 years"","
"0","                                       #       ""40-44 years"","
"0","                                        #      ""45-49 years"","
"0","                                         #     ""50-54 years"","
"0","                                          #    ""55-59 years"","
"0","                                           #   ""60-64 years"","
"0","                                            #  ""65-69 years"","
"0","                                             # ""70-74 years"","
"0","                                  #            ""75-79 years"","
"0","                                   #           ""80-84 years"","
"0","                                    #          ""85-89 years"","
"0","                                     #         ""90-94 years"","
"0","                                      #        ""95+ years"","
"0","                                       #       ""All ages"","
"0","                                        #      ""Age-standardized"")"
"0","                                )) %>% "
"0","       mutate(measure = recode(measure,"
"0","             ""YLDs (Years Lived with Disability)"" = ""YLDs"","
"0","             ""YLLs (Years of Life Lost)"" = ""YLLs"","
"0","             ""DALYs (Disability-Adjusted Life Years)"" = ""DALYs""),"
"0","              location = recode(location,"
"0","             ""Bolivia (Plurinational State of)"" = ""Bolivia"","
"0","             ""Venezuela (Bolivarian Republic of)"" = ""Venezuela""),"
"0","             val_cat = cut(x = GBD$val,"
"0","                           breaks = c(-Inf, 1, 10, 100, 500,"
"0","                                             1000, 2500, 5000, Inf),"
"0","                           labels = c(""0 - 1"","
"0","                                      ""1 - 10"","
"0","                                      ""10 - 100"","
"0","                                      ""100 - 500"","
"0","                                      ""500 - 1000"","
"0","                                      ""1000 - 2500"","
"0","                                      ""2500 - 5000"","
"0","                                      "">5000"")))"
"0","       "
"0",""
"0","GBD_POP <-  GBD_POP_1990 %>%"
"0","            bind_rows(GBD_POP_2019) %>%"
"0","            rename(location = location_name,"
"0","                   sex = sex_name,"
"0","                   age = age_group_name,"
"0","                   year = year_id,"
"0","                   pop = val) %>% "
"0","            select(location, sex, age, year, pop) %>%"
"0","            mutate(location = recode(location,"
"0","                   ""Bolivia (Plurinational State of)"" = ""Bolivia"","
"0","                   ""Venezuela (Bolivarian Republic of)"" = ""Venezuela""),"
"0","                   sex = recode(sex,"
"0","                   ""both"" = ""Both"","
"0","                   ""male"" = ""Male"","
"0","                   ""female"" = ""Female""),"
"0","                   age = as.factor(age),"
"0","                   year = as.factor(year))%>%"
"0","            filter(location %in% c(""Argentina"","
"0","                                   ""Bolivia"","
"0","                                   ""Brazil"","
"0","                                   ""Chile"","
"0","                                   ""Colombia"","
"0","                                   ""Ecuador"","
"0","                                   ""Guyana"","
"0","                                   ""Paraguay"","
"0","                                   ""Peru"","
"0","                                   ""Suriname"","
"0","                                   ""Uruguay"","
"0","                                   ""Venezuela"")) %>% "
"0","            mutate(age = recode(age,  ""Under 5""=""<5 years"","
"0","                                      ""5 to 9""=""5-9 years"","
"0","                                      ""10 to 14""=""10-14 years"","
"0","                                      ""15 to 19""=""15-19 years"","
"0","                                      ""20 to 24""=""20-24 years"","
"0","                                      ""25 to 29""=""25-29 years"","
"0","                                      ""30 to 34""=""30-34 years"","
"0","                                      ""35 to 39""=""35-39 years"","
"0","                                      ""40 to 44""=""40-44 years"","
"0","                                      ""45 to 49""=""45-49 years"","
"0","                                      ""50 to 54""=""50-54 years"","
"0","                                      ""55 to 59""=""55-59 years"","
"0","                                      ""60 to 64""=""60-64 years"","
"0","                                      ""65 to 69""=""65-69 years"","
"0","                                      ""70 to 74""=""70-74 years"","
"0","                                      ""75 to 79""=""75-79 years"","
"0","                                      ""80 to 84""=""80-84 years"","
"0","                                      ""85 to 89""=""85-89 years"","
"0","                                      ""90 to 94""=""90-94 years"","
"0","                                      ""95 plus""=""95+ years"","
"0","                                      ""All Ages"" = ""All ages"")) %>% "
"0","            filter(age %in% c(""<5 years"",                                                                        ""5-9 years"","
"0","                              ""10-14 years"","
"0","                              ""15-19 years"","
"0","                              ""20-24 years"","
"0","                              ""25-29 years"","
"0","                              ""30-34 years"","
"0","                              ""35-39 years"","
"0","                              ""40-44 years"","
"0","                              ""45-49 years"","
"0","                              ""50-54 years"","
"0","                              ""55-59 years"","
"0","                              ""60-64 years"","
"0","                              ""65-69 years"","
"0","                              ""70-74 years"","
"0","                              ""75-79 years"","
"0","                              ""80-84 years"","
"0","                              ""85-89 years"","
"0","                              ""90-94 years"","
"0","                              ""95+ years"","
"0","                              ""All ages""))"
"0","  "
"0","rm(GBD_POP_1990,GBD_POP_2019) #Dont waste my precious RAM"
"0",""
"0","SDI <- SDI %>%"
"0","          filter(Location %in% c(""Argentina"","
"0","                 ""Bolivia"","
"0","                 ""Brazil"","
"0","                 ""Chile"","
"0","                 ""Colombia"","
"0","                 ""Ecuador"","
"0","                 ""Guyana"","
"0","                 ""Paraguay"","
"0","                 ""Peru"","
"0","                 ""Suriname"","
"0","                 ""Uruguay"","
"0","                 ""Venezuela"")) %>%"
"0","          select(""Location"", ""1990"", ""2019"") %>%"
"0","          pivot_longer(cols = c(""1990"", ""2019""),"
"0","                       names_to = ""year"","
"0","                       values_to = ""SDI"")"
"0",""
"0","GBDrates <- GBDrates %>%"
"0","            mutate(measure = recode(measure,"
"0","            ""YLDs (Years Lived with Disability)"" = ""YLDs"","
"0","            ""YLLs (Years of Life Lost)"" = ""YLLs"","
"0","            ""DALYs (Disability-Adjusted Life Years)"" = ""DALYs"")) %>%"
"0","            mutate(location = recode(location,"
"0","           ""Bolivia (Plurinational State of)"" = ""Bolivia"","
"0","           ""Venezuela (Bolivarian Republic of)"" = ""Venezuela"")) %>%"
"0","            mutate(year_end = as.factor(year_end)) %>%"
"0","            select(-c(""rei"", ""year_start"")) %>%"
"0","            rename(ROC_val = val, "
"0","                   ROC_upper = upper, "
"0","                   ROC_lower = lower,"
"0","                   year = year_end)"
"0",""
"0",""
"0","SA_map <- ne_countries(scale = ""medium"","
"0","                   type = ""map_units"","
"0","                   returnclass = ""sf"") %>%"
"0","      filter(name %in% c(""Argentina"","
"0","                         ""Bolivia"","
"0","                         ""Brazil"","
"0","                         ""Chile"","
"0","                         ""Colombia"","
"0","                         ""Ecuador"","
"0","                         ""Guyana"","
"0","                         ""Paraguay"","
"0","                         ""Peru"","
"0","                         ""Suriname"","
"0","                         ""Uruguay"","
"0","                         ""Venezuela""))"
"0",""
"0",""
"0","GBD <- GBD %>%"
"0","        full_join(SDI, by = c(""location"" = ""Location"", ""year"" = ""year"")) %>%"
"0","        full_join(GBD_POP, by=c(""location""=""location"","
"0","                                ""age""=""age"","
"0","                                ""sex""=""sex"","
"0","                                ""year""=""year"")) %>% "
"0","        full_join(GBDrates, by=c(""location"" = ""location"","
"0","                                 ""measure"" = ""measure"","
"0","                                 ""sex"" = ""sex"","
"0","                                 ""cause"" = ""cause"","
"0","                                 ""metric"" = ""metric"","
"0","                                 ""year"" = ""year"","
"0","                                 ""age"" = ""age"")) %>% "
"0","        mutate(age = recode(age,  ""<5 years""=""<5"","
"0","                                  ""5-9 years""=""05-09"","
"0","                                  ""10-14 years""=""10-14"","
"0","                                  ""15-19 years""=""15-19"","
"0","                                  ""20-24 years""=""20-24"","
"0","                                  ""25-29 years""=""25-29"","
"0","                                  ""30-34 years""=""30-34"","
"0","                                  ""35-39 years""=""35-39"","
"0","                                  ""40-44 years""=""40-44"","
"0","                                  ""45-49 years""=""45-49"","
"0","                                  ""50-54 years""=""50-54"","
"0","                                  ""55-59 years""=""55-59"","
"0","                                  ""60-64 years""=""60-64"","
"0","                                  ""65-69 years""=""65-69"","
"0","                                  ""70-74 years""=""70-74"","
"0","                                  ""75-79 years""=""75-79"","
"0","                                  ""80-84 years""=""80-84"","
"0","                                  ""85-89 years""=""85-89"","
"0","                                  ""90-94 years""=""90-94"","
"0","                                  ""95+ years""=""95+""))"
"0",""
"0","rm(GBD_POP, SDI, GBDrates) #Dont waste my precious RAM"
"0",""
"0","SA_SUM <- GBD %>%"
"0","          filter(metric == ""Number"",age != ""Age-standardized"") %>% "
"0","          group_by(measure,sex,age,cause,year) %>% "
"0","          summarise(number = sum(val), pop = sum(pop)) %>% "
"0","          mutate(rate = (number/pop)*100000)"
